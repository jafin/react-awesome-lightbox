{"version":3,"file":"react-awesome-lightbox.cjs.development.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { ReactNode } from \"react\";\r\nimport { LightboxProps } from \"./LightboxProps\";\r\n\r\nconst DEFAULT_ZOOM_STEP = 0.3;\r\nconst DEFAULT_LARGE_ZOOM = 4;\r\n\r\nfunction isTouchEvent(\r\n  e: React.TouchEvent | React.MouseEvent,\r\n): e is React.TouchEvent {\r\n  return e && \"touches\" in e;\r\n}\r\n\r\nfunction getXY(\r\n  e: React.MouseEvent<HTMLImageElement, MouseEvent> | React.TouchEvent,\r\n) {\r\n  let x = 0;\r\n  let y = 0;\r\n\r\n  if (isTouchEvent(e)) {\r\n    x = e.touches[0].pageX;\r\n    y = e.touches[0].pageY;\r\n  } else {\r\n    x = e.pageX;\r\n    y = e.pageY;\r\n  }\r\n  return { x, y };\r\n}\r\n\r\ntype CondProps = {\r\n  condition: boolean;\r\n  children?: ReactNode;\r\n};\r\n\r\nfunction Cond(props: CondProps) {\r\n  if (!props.condition) return null;\r\n  return <React.Fragment>{props.children}</React.Fragment>;\r\n}\r\n\r\nexport default class Lightbox extends React.Component<LightboxProps, {}> {\r\n  initX = 0;\r\n  initY = 0;\r\n  lastX = 0;\r\n  lastY = 0;\r\n  _cont = React.createRef<any>();\r\n  state = {\r\n    x: 0,\r\n    y: 0,\r\n    zoom: 1,\r\n    rotate: 0,\r\n    loading: true,\r\n    moving: false,\r\n    current: this.props?.startIndex ?? 0,\r\n    multi: this.props?.images?.length ? true : false,\r\n  };\r\n  createTransform = (x: number, y: number, zoom: number, rotate: number) =>\r\n    `translate3d(${x}px,${y}px,0px) scale(${zoom}) rotate(${rotate}deg)`;\r\n  stopSideEffect = (\r\n    e: React.MouseEvent<HTMLElement, MouseEvent> | KeyboardEvent,\r\n  ) => e.stopPropagation();\r\n  getCurrentImage = (\r\n    s: {\r\n      x?: number;\r\n      y?: number;\r\n      zoom?: number;\r\n      rotate?: number;\r\n      loading?: boolean;\r\n      moving?: boolean;\r\n      current: any;\r\n      multi: any;\r\n    },\r\n    p: Readonly<LightboxProps>,\r\n  ) => {\r\n    if (!s.multi) return p.image ?? \"\";\r\n    return p.images[s.current]?.url ?? p.images?.[s.current] ?? \"\";\r\n  };\r\n  getCurrentTitle = (\r\n    s: {\r\n      x?: number;\r\n      y?: number;\r\n      zoom?: number;\r\n      rotate?: number;\r\n      loading?: boolean;\r\n      moving?: boolean;\r\n      current: any;\r\n      multi: any;\r\n    },\r\n    p: Readonly<LightboxProps>,\r\n  ) => {\r\n    if (!s.multi) return p.title ?? \"\";\r\n    return p.images?.[s.current]?.title ?? \"\";\r\n  };\r\n  resetZoom = () => this.setState({ x: 0, y: 0, zoom: 1 });\r\n  shockZoom = (e: React.MouseEvent<HTMLImageElement, MouseEvent>) => {\r\n    let {\r\n      zoomStep = DEFAULT_ZOOM_STEP,\r\n      allowZoom = true,\r\n      doubleClickZoom = DEFAULT_LARGE_ZOOM,\r\n    } = this.props;\r\n    if (!allowZoom || !doubleClickZoom) return false;\r\n    this.stopSideEffect(e);\r\n    if (this.state.zoom > 1) return this.resetZoom();\r\n    const _z =\r\n      (zoomStep < 1 ? Math.ceil(doubleClickZoom / zoomStep) : zoomStep) *\r\n      zoomStep;\r\n    const _xy = getXY(e);\r\n    const _cbr = this._cont.current?.getBoundingClientRect?.();\r\n    const _ccx = _cbr.x + _cbr.width / 2;\r\n    const _ccy = _cbr.y + _cbr.height / 2;\r\n    const x = (_xy.x - _ccx) * -1 * _z;\r\n    const y = (_xy.y - _ccy) * -1 * _z;\r\n    this.setState({ x, y, zoom: _z });\r\n  };\r\n  navigateImage = (\r\n    direction: string,\r\n    e: React.MouseEvent<HTMLDivElement, MouseEvent> | KeyboardEvent, //React.MouseEvent<HTMLDivElement, MouseEvent>\r\n  ) => {\r\n    this.stopSideEffect(e);\r\n    let current = 0;\r\n    switch (direction) {\r\n      case \"next\":\r\n        current = this.state.current + 1;\r\n        break;\r\n      case \"prev\":\r\n        current = this.state.current - 1;\r\n        break;\r\n    }\r\n    if (current >= this.props.images.length) current = 0;\r\n    else if (current < 0) current = this.props.images.length - 1;\r\n    this.setState({ current, x: 0, y: 0, zoom: 1, rotate: 0, loading: true });\r\n  };\r\n  startMove = (\r\n    e:\r\n      | React.TouchEvent<HTMLImageElement>\r\n      | React.MouseEvent<HTMLImageElement, MouseEvent>,\r\n  ) => {\r\n    if (this.state.zoom <= 1) return false;\r\n    this.setState({ moving: true });\r\n    let xy = getXY(e);\r\n    this.initX = xy.x - this.lastX;\r\n    this.initY = xy.y - this.lastY;\r\n  };\r\n  duringMove = (\r\n    e:\r\n      | React.MouseEvent<HTMLImageElement, MouseEvent>\r\n      | React.TouchEvent<HTMLImageElement>,\r\n  ) => {\r\n    if (!this.state.moving) return false;\r\n    let xy = getXY(e);\r\n    this.lastX = xy.x - this.initX;\r\n    this.lastY = xy.y - this.initY;\r\n    this.setState({\r\n      x: xy.x - this.initX,\r\n      y: xy.y - this.initY,\r\n    });\r\n  };\r\n  endMove = (_e: any): void => this.setState({ moving: false });\r\n  applyZoom = (type: string) => {\r\n    let { zoomStep = DEFAULT_ZOOM_STEP } = this.props;\r\n    switch (type) {\r\n      case \"in\":\r\n        this.setState({ zoom: this.state.zoom + zoomStep });\r\n        break;\r\n      case \"out\":\r\n        let newZoom = this.state.zoom - zoomStep;\r\n        if (newZoom < 1) break;\r\n        else if (newZoom === 1) this.setState({ x: 0, y: 0, zoom: 1 });\r\n        else this.setState({ zoom: newZoom });\r\n        break;\r\n      case \"reset\":\r\n        this.resetZoom();\r\n        break;\r\n    }\r\n  };\r\n  applyRotate = (type: string) => {\r\n    switch (type) {\r\n      case \"cw\":\r\n        this.setState({ rotate: this.state.rotate + 90 });\r\n        break;\r\n      case \"acw\":\r\n        this.setState({ rotate: this.state.rotate - 90 });\r\n        break;\r\n    }\r\n  };\r\n  reset = (e: React.MouseEvent<HTMLElement, MouseEvent>  | KeyboardEvent) => {\r\n    this.stopSideEffect(e);\r\n    this.setState({ x: 0, y: 0, zoom: 1, rotate: 0 });\r\n  };\r\n  exit = (e: React.MouseEvent<HTMLDivElement, MouseEvent> | KeyboardEvent) => {\r\n    if (typeof this.props.onClose === \"function\") return this.props.onClose(e);\r\n    console.error(\r\n      \"No Exit function passed on prop: onClose. Clicking the close button will do nothing\",\r\n    );\r\n  };\r\n  shouldShowReset = (): boolean =>\r\n    this.state.x > 0 ||\r\n    this.state.y > 0 ||\r\n    this.state.zoom !== 1 ||\r\n    this.state.rotate !== 0;\r\n  canvasClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n    let { clickOutsideToExit = true } = this.props;\r\n    if (clickOutsideToExit && this.state.zoom <= 1) return this.exit(e);\r\n  };\r\n  keyboardNavigation = (e: KeyboardEvent) => {\r\n    let { allowZoom = true, allowReset = true } = this.props;\r\n    let { multi, x, y, zoom } = this.state;\r\n    switch (e.key) {\r\n      case \"ArrowLeft\":\r\n        if (multi && zoom === 1) this.navigateImage(\"prev\", e);\r\n        else if (zoom > 1) this.setState({ x: x - 20 });\r\n        break;\r\n      case \"ArrowRight\":\r\n        if (multi && zoom === 1) this.navigateImage(\"next\", e);\r\n        else if (zoom > 1) this.setState({ x: x + 20 });\r\n        break;\r\n      case \"ArrowUp\":\r\n        if (zoom > 1) this.setState({ y: y + 20 });\r\n        break;\r\n      case \"ArrowDown\":\r\n        if (zoom > 1) this.setState({ y: y - 20 });\r\n        break;\r\n      case \"+\":\r\n        if (allowZoom) this.applyZoom(\"in\");\r\n        break;\r\n      case \"-\":\r\n        if (allowZoom) this.applyZoom(\"out\");\r\n        break;\r\n      case \"Escape\":\r\n        if (allowReset && this.shouldShowReset()) this.reset(e);\r\n        else this.exit(e);\r\n        break;\r\n    }\r\n  };\r\n  componentDidMount() {\r\n    document.body.classList.add(\"lb-open-lightbox\");\r\n    let { keyboardInteraction = true } = this.props;\r\n    if (keyboardInteraction)\r\n      document.addEventListener(\"keyup\", this.keyboardNavigation);\r\n  }\r\n  componentWillUnmount() {\r\n    document.body.classList.remove(\"lb-open-lightbox\");\r\n    let { keyboardInteraction = true } = this.props;\r\n    if (keyboardInteraction)\r\n      document.removeEventListener(\"keyup\", this.keyboardNavigation);\r\n  }\r\n  render() {\r\n    let image = this.getCurrentImage(this.state, this.props);\r\n    let title = this.getCurrentTitle(this.state, this.props);\r\n    if (!image) {\r\n      console.warn(\"Not showing lightbox because no image was supplied.\");\r\n      return null;\r\n    }\r\n    let {\r\n      allowZoom = true,\r\n      allowRotate = true,\r\n      buttonAlign = \"flex-end\",\r\n      showTitle = true,\r\n      allowReset = true,\r\n    } = this.props;\r\n    let { x, y, zoom, rotate, multi, loading, moving } = this.state;\r\n    let _reset = allowReset && this.shouldShowReset();\r\n    return (\r\n      <div className=\"lb-container\">\r\n        <div className=\"lb-header\" style={{ justifyContent: buttonAlign }}>\r\n          <Cond condition={showTitle && title}>\r\n            <div\r\n              className=\"lb-title\"\r\n              style={{\r\n                display: buttonAlign === \"center\" ? \"none\" : \"flex\",\r\n                order: buttonAlign === \"flex-start\" ? 2 : \"unset\",\r\n              }}\r\n            >\r\n              <span\r\n                title={title}\r\n                style={{\r\n                  textAlign: buttonAlign === \"flex-start\" ? \"right\" : \"left\",\r\n                }}\r\n              >\r\n                {title}\r\n              </span>\r\n            </div>\r\n          </Cond>\r\n          <Cond condition={buttonAlign === \"center\" || _reset}>\r\n            <div\r\n              title=\"Reset\"\r\n              style={{ order: buttonAlign === \"flex-start\" ? 1 : \"unset\" }}\r\n              className={`lb-button lb-icon-reset lb-hide-mobile reload ${\r\n                _reset ? \"\" : \"lb-disabled\"\r\n              }`}\r\n              onClick={this.reset}\r\n            ></div>\r\n          </Cond>\r\n          <Cond condition={multi}>\r\n            <div\r\n              title=\"Previous\"\r\n              className=\"lb-button lb-icon-arrow prev lb-hide-mobile\"\r\n              onClick={(e) => this.navigateImage(\"prev\", e)}\r\n            ></div>\r\n            <div\r\n              title=\"Next\"\r\n              className=\"lb-button lb-icon-arrow next lb-hide-mobile\"\r\n              onClick={(e) => this.navigateImage(\"next\", e)}\r\n            ></div>\r\n          </Cond>\r\n          <Cond condition={allowZoom}>\r\n            <div\r\n              title=\"Zoom In\"\r\n              className=\"lb-button lb-icon-zoomin zoomin\"\r\n              onClick={() => this.applyZoom(\"in\")}\r\n            ></div>\r\n            <div\r\n              title=\"Zoom Out\"\r\n              className={`lb-button lb-icon-zoomout zoomout ${\r\n                zoom <= 1 ? \"lb-disabled\" : \"\"\r\n              }`}\r\n              onClick={() => this.applyZoom(\"out\")}\r\n            ></div>\r\n          </Cond>\r\n          <Cond condition={allowRotate}>\r\n            <div\r\n              title=\"Rotate left\"\r\n              className=\"lb-button lb-icon-rotate rotatel\"\r\n              onClick={() => this.applyRotate(\"acw\")}\r\n            ></div>\r\n            <div\r\n              title=\"Rotate right\"\r\n              className=\"lb-button lb-icon-rotate rotater\"\r\n              onClick={() => this.applyRotate(\"cw\")}\r\n            ></div>\r\n          </Cond>\r\n          <div\r\n            title=\"Close\"\r\n            className=\"lb-button lb-icon-close close\"\r\n            style={{ order: buttonAlign === \"flex-start\" ? -1 : \"unset\" }}\r\n            onClick={(e) => this.exit(e)}\r\n          ></div>\r\n        </div>\r\n        <div\r\n          className={`lb-canvas${loading ? \" lb-loading\" : \"\"}`}\r\n          ref={this._cont}\r\n          onClick={(e) => this.canvasClick(e)}\r\n        >\r\n          <img\r\n            draggable=\"false\"\r\n            style={{\r\n              transform: this.createTransform(x, y, zoom, rotate),\r\n              cursor: zoom > 1 ? \"grab\" : \"unset\",\r\n              transition: moving ? \"none\" : \"all 0.1s\",\r\n            }}\r\n            onMouseDown={(e) => this.startMove(e)}\r\n            onTouchStart={(e) => this.startMove(e)}\r\n            onMouseMove={(e) => this.duringMove(e)}\r\n            onTouchMove={(e) => this.duringMove(e)}\r\n            onMouseUp={(e) => this.endMove(e)}\r\n            onMouseLeave={(e) => this.endMove(e)}\r\n            onTouchEnd={(e) => this.endMove(e)}\r\n            onClick={(e) => this.stopSideEffect(e)}\r\n            onDoubleClick={(e) => this.shockZoom(e)}\r\n            onLoad={() => this.setState({ loading: false })}\r\n            className={`lb-img${loading ? \" lb-loading\" : \"\"}`}\r\n            title={title}\r\n            src={image}\r\n            alt={title}\r\n          />\r\n          <div className=\"mobile-controls lb-show-mobile\">\r\n            {multi ? (\r\n              <div\r\n                title=\"Previous\"\r\n                className=\"lb-button lb-icon-arrow prev\"\r\n                onClick={(e) => this.navigateImage(\"prev\", e)}\r\n              ></div>\r\n            ) : null}\r\n            {_reset ? (\r\n              <div\r\n                title=\"Reset\"\r\n                className=\"lb-button lb-icon-reset reload\"\r\n                onClick={this.reset}\r\n              ></div>\r\n            ) : null}\r\n            {multi ? (\r\n              <div\r\n                title=\"Next\"\r\n                className=\"lb-button lb-icon-arrow next\"\r\n                onClick={(e) => this.navigateImage(\"next\", e)}\r\n              ></div>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"names":["DEFAULT_ZOOM_STEP","DEFAULT_LARGE_ZOOM","isTouchEvent","e","getXY","x","y","touches","pageX","pageY","Cond","props","condition","React","Fragment","children","Lightbox","createRef","zoom","rotate","loading","moving","current","startIndex","multi","images","length","stopPropagation","s","p","image","url","title","setState","zoomStep","allowZoom","doubleClickZoom","stopSideEffect","state","resetZoom","_z","Math","ceil","_xy","_cbr","_cont","getBoundingClientRect","_ccx","width","_ccy","height","direction","xy","initX","lastX","initY","lastY","_e","type","newZoom","onClose","console","error","clickOutsideToExit","exit","allowReset","key","navigateImage","applyZoom","shouldShowReset","reset","componentDidMount","document","body","classList","add","keyboardInteraction","addEventListener","keyboardNavigation","componentWillUnmount","remove","removeEventListener","render","getCurrentImage","getCurrentTitle","warn","allowRotate","buttonAlign","showTitle","_reset","className","style","justifyContent","display","order","textAlign","onClick","applyRotate","ref","canvasClick","draggable","transform","createTransform","cursor","transition","onMouseDown","startMove","onTouchStart","onMouseMove","duringMove","onTouchMove","onMouseUp","endMove","onMouseLeave","onTouchEnd","onDoubleClick","shockZoom","onLoad","src","alt","Component"],"mappings":"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"}