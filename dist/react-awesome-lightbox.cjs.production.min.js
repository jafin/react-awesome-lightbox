"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=(t=require("react"))&&"object"==typeof t&&"default"in t?t.default:t;function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t){var e=0,o=0;return function(t){return t&&"touches"in t}(t)?(e=t.touches[0].pageX,o=t.touches[0].pageY):(e=t.pageX,o=t.pageY),{x:e,y:o}}function r(t){return t.condition?e.createElement(e.Fragment,null,t.children):null}exports.default=function(t){var i,a;function l(){var o,r,i,a,l;return(l=t.apply(this,arguments)||this).initX=0,l.initY=0,l.lastX=0,l.lastY=0,l._cont=e.createRef(),l.state={x:0,y:0,zoom:1,rotate:0,loading:!0,moving:!1,current:null!=(o=null==(r=l.props)?void 0:r.startIndex)?o:0,multi:!(null==(i=l.props)||null==(a=i.images)||!a.length)},l.createTransform=function(t,e,o,n){return"translate3d("+t+"px,"+e+"px,0px) scale("+o+") rotate("+n+"deg)"},l.stopSideEffect=function(t){return t.stopPropagation()},l.getCurrentImage=function(t,e){var o,n,r,i,a;return t.multi?null!=(n=null!=(r=null==(i=e.images[t.current])?void 0:i.url)?r:null==(a=e.images)?void 0:a[t.current])?n:"":null!=(o=e.image)?o:""},l.getCurrentTitle=function(t,e){var o,n,r,i;return t.multi?null!=(n=null==(r=e.images)||null==(i=r[t.current])?void 0:i.title)?n:"":null!=(o=e.title)?o:""},l.resetZoom=function(){return l.setState({x:0,y:0,zoom:1})},l.shockZoom=function(t){var e,o=l.props,r=o.zoomStep,i=void 0===r?.3:r,a=o.allowZoom,s=o.doubleClickZoom,c=void 0===s?4:s;if(void 0!==a&&!a||!c)return!1;if(l.stopSideEffect(t),l.state.zoom>1)return l.resetZoom();var u=(i<1?Math.ceil(c/i):i)*i,m=n(t),d=null==(e=l._cont.current)||null==e.getBoundingClientRect?void 0:e.getBoundingClientRect();l.setState({x:-1*(m.x-(d.x+d.width/2))*u,y:-1*(m.y-(d.y+d.height/2))*u,zoom:u})},l.navigateImage=function(t,e){l.stopSideEffect(e);var o=0;switch(t){case"next":o=l.state.current+1;break;case"prev":o=l.state.current-1}o>=l.props.images.length?o=0:o<0&&(o=l.props.images.length-1),l.setState({current:o,x:0,y:0,zoom:1,rotate:0,loading:!0})},l.startMove=function(t){if(l.state.zoom<=1)return!1;l.setState({moving:!0});var e=n(t);l.initX=e.x-l.lastX,l.initY=e.y-l.lastY},l.duringMove=function(t){if(!l.state.moving)return!1;var e=n(t);l.lastX=e.x-l.initX,l.lastY=e.y-l.initY,l.setState({x:e.x-l.initX,y:e.y-l.initY})},l.endMove=function(t){return l.setState({moving:!1})},l.applyZoom=function(t){var e=l.props.zoomStep,o=void 0===e?.3:e;switch(t){case"in":l.setState({zoom:l.state.zoom+o});break;case"out":var n=l.state.zoom-o;if(n<1)break;l.setState(1===n?{x:0,y:0,zoom:1}:{zoom:n});break;case"reset":l.resetZoom()}},l.applyRotate=function(t){switch(t){case"cw":l.setState({rotate:l.state.rotate+90});break;case"acw":l.setState({rotate:l.state.rotate-90})}},l.reset=function(t){l.stopSideEffect(t),l.setState({x:0,y:0,zoom:1,rotate:0})},l.exit=function(t){if("function"==typeof l.props.onClose)return l.props.onClose(t);console.error("No Exit function passed on prop: onClose. Clicking the close button will do nothing")},l.shouldShowReset=function(){return l.state.x>0||l.state.y>0||1!==l.state.zoom||0!==l.state.rotate},l.canvasClick=function(t){var e=l.props.clickOutsideToExit;if((void 0===e||e)&&l.state.zoom<=1)return l.exit(t)},l.keyboardNavigation=function(t){var e=l.props,o=e.allowZoom,n=void 0===o||o,r=e.allowReset,i=void 0===r||r,a=l.state,s=a.multi,c=a.x,u=a.y,m=a.zoom;switch(t.key){case"ArrowLeft":s&&1===m?l.navigateImage("prev",t):m>1&&l.setState({x:c-20});break;case"ArrowRight":s&&1===m?l.navigateImage("next",t):m>1&&l.setState({x:c+20});break;case"ArrowUp":m>1&&l.setState({y:u+20});break;case"ArrowDown":m>1&&l.setState({y:u-20});break;case"+":n&&l.applyZoom("in");break;case"-":n&&l.applyZoom("out");break;case"Escape":i&&l.shouldShowReset()?l.reset(t):l.exit(t)}},l}a=t,(i=l).prototype=Object.create(a.prototype),i.prototype.constructor=i,o(i,a);var s=l.prototype;return s.componentDidMount=function(){document.body.classList.add("lb-open-lightbox");var t=this.props.keyboardInteraction;(void 0===t||t)&&document.addEventListener("keyup",this.keyboardNavigation)},s.componentWillUnmount=function(){document.body.classList.remove("lb-open-lightbox");var t=this.props.keyboardInteraction;(void 0===t||t)&&document.removeEventListener("keyup",this.keyboardNavigation)},s.render=function(){var t=this,o=this.getCurrentImage(this.state,this.props),n=this.getCurrentTitle(this.state,this.props);if(!o)return console.warn("Not showing lightbox because no image was supplied."),null;var i=this.props,a=i.allowZoom,l=void 0===a||a,s=i.allowRotate,c=void 0===s||s,u=i.buttonAlign,m=void 0===u?"flex-end":u,d=i.showTitle,p=void 0===d||d,v=i.allowReset,f=this.state,b=f.x,g=f.y,h=f.zoom,y=f.rotate,x=f.multi,k=f.loading,E=f.moving,w=(void 0===v||v)&&this.shouldShowReset();return e.createElement("div",{className:"lb-container"},e.createElement("div",{className:"lb-header",style:{justifyContent:m}},e.createElement(r,{condition:p&&n},e.createElement("div",{className:"lb-title",style:{display:"center"===m?"none":"flex",order:"flex-start"===m?2:"unset"}},e.createElement("span",{title:n,style:{textAlign:"flex-start"===m?"right":"left"}},n))),e.createElement(r,{condition:"center"===m||w},e.createElement("div",{title:"Reset",style:{order:"flex-start"===m?1:"unset"},className:"lb-button lb-icon-reset lb-hide-mobile reload "+(w?"":"lb-disabled"),onClick:this.reset})),e.createElement(r,{condition:x},e.createElement("div",{title:"Previous",className:"lb-button lb-icon-arrow prev lb-hide-mobile",onClick:function(e){return t.navigateImage("prev",e)}}),e.createElement("div",{title:"Next",className:"lb-button lb-icon-arrow next lb-hide-mobile",onClick:function(e){return t.navigateImage("next",e)}})),e.createElement(r,{condition:l},e.createElement("div",{title:"Zoom In",className:"lb-button lb-icon-zoomin zoomin",onClick:function(){return t.applyZoom("in")}}),e.createElement("div",{title:"Zoom Out",className:"lb-button lb-icon-zoomout zoomout "+(h<=1?"lb-disabled":""),onClick:function(){return t.applyZoom("out")}})),e.createElement(r,{condition:c},e.createElement("div",{title:"Rotate left",className:"lb-button lb-icon-rotate rotatel",onClick:function(){return t.applyRotate("acw")}}),e.createElement("div",{title:"Rotate right",className:"lb-button lb-icon-rotate rotater",onClick:function(){return t.applyRotate("cw")}})),e.createElement("div",{title:"Close",className:"lb-button lb-icon-close close",style:{order:"flex-start"===m?-1:"unset"},onClick:function(e){return t.exit(e)}})),e.createElement("div",{className:"lb-canvas"+(k?" lb-loading":""),ref:this._cont,onClick:function(e){return t.canvasClick(e)}},e.createElement("img",{draggable:"false",style:{transform:this.createTransform(b,g,h,y),cursor:h>1?"grab":"unset",transition:E?"none":"all 0.1s"},onMouseDown:function(e){return t.startMove(e)},onTouchStart:function(e){return t.startMove(e)},onMouseMove:function(e){return t.duringMove(e)},onTouchMove:function(e){return t.duringMove(e)},onMouseUp:function(e){return t.endMove(e)},onMouseLeave:function(e){return t.endMove(e)},onTouchEnd:function(e){return t.endMove(e)},onClick:function(e){return t.stopSideEffect(e)},onDoubleClick:function(e){return t.shockZoom(e)},onLoad:function(){return t.setState({loading:!1})},className:"lb-img"+(k?" lb-loading":""),title:n,src:o,alt:n}),e.createElement("div",{className:"mobile-controls lb-show-mobile"},x?e.createElement("div",{title:"Previous",className:"lb-button lb-icon-arrow prev",onClick:function(e){return t.navigateImage("prev",e)}}):null,w?e.createElement("div",{title:"Reset",className:"lb-button lb-icon-reset reload",onClick:this.reset}):null,x?e.createElement("div",{title:"Next",className:"lb-button lb-icon-arrow next",onClick:function(e){return t.navigateImage("next",e)}}):null)))},l}(e.Component);
//# sourceMappingURL=react-awesome-lightbox.cjs.production.min.js.map
